<!DOCTYPE html>
<html class="no-js" lang="es"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="../images/favicon.png" rel="shortcut icon"/><meta content="mkdocs-1.1.2, mkdocs-material-5.4.0" name="generator"/><title>Instalación - Documentación de Usuario.</title><link href="../assets/stylesheets/main.fe0cca5b.min.css" rel="stylesheet"/><link href="../assets/stylesheets/palette.a46bcfb3.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link href="../stylesheets/extra.css" rel="stylesheet"/></head> <body data-md-color-accent="light-blue" data-md-color-primary="" data-md-color-scheme="default" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#instalacion-del-sistema"> Saltar a contenido </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Cabecera" class="md-header-nav md-grid"> <a aria-label="Documentación de Usuario." class="md-header-nav__button md-logo" href=".." title="Documentación de Usuario."> <img alt="logo" src="../images/logo.png"/> </a> <label class="md-header-nav__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg> </label> <div class="md-header-nav__title" data-md-component="header-title"> <div class="md-header-nav__ellipsis"> <span class="md-header-nav__topic md-ellipsis"> Documentación de Usuario. </span> <span class="md-header-nav__topic md-ellipsis"> Instalación </span> </div> </div> <label class="md-header-nav__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Búsqueda" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Búsqueda" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </label> <button aria-label="Limpiar" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg> </button> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list"></ol> </div> </div> </div> </div> </div> <div class="md-header-nav__source"> <a class="md-source" href="https://gestion.cenditel.gob.ve/trac/browser/kavac/" title="Ir al repositorio"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M100.59 334.24c48.57 3.31 58.95 2.11 58.95 11.94 0 20-65.55 20.06-65.55 1.52.01-5.09 3.29-9.4 6.6-13.46zm27.95-116.64c-32.29 0-33.75 44.47-.75 44.47 32.51 0 31.71-44.47.75-44.47zM448 80v352a48 48 0 01-48 48H48a48 48 0 01-48-48V80a48 48 0 0148-48h352a48 48 0 0148 48zm-227 69.31c0 14.49 8.38 22.88 22.86 22.88 14.74 0 23.13-8.39 23.13-22.88S258.62 127 243.88 127c-14.48 0-22.88 7.84-22.88 22.31zM199.18 195h-49.55c-25-6.55-81.56-4.85-81.56 46.75 0 18.8 9.4 32 21.85 38.11C74.23 294.23 66.8 301 66.8 310.6c0 6.87 2.79 13.22 11.18 16.76-8.9 8.4-14 14.48-14 25.92C64 373.35 81.53 385 127.52 385c44.22 0 69.87-16.51 69.87-45.73 0-36.67-28.23-35.32-94.77-39.38l8.38-13.43c17 4.74 74.19 6.23 74.19-42.43 0-11.69-4.83-19.82-9.4-25.67l23.38-1.78zm84.34 109.84l-13-1.78c-3.82-.51-4.07-1-4.07-5.09V192.52h-52.6l-2.79 20.57c15.75 5.55 17 4.86 17 10.17V298c0 5.62-.31 4.58-17 6.87v20.06h72.42zM384 315l-6.87-22.37c-40.93 15.37-37.85-12.41-37.85-16.73v-60.72h37.85v-25.41h-35.82c-2.87 0-2 2.52-2-38.63h-24.18c-2.79 27.7-11.68 38.88-34 41.42v22.62c20.47 0 19.82-.85 19.82 2.54v66.57c0 28.72 11.43 40.91 41.67 40.91 14.45 0 30.45-4.83 41.38-10.2z"></path></svg> </div> <div class="md-source__repository"> Repositorio-Kavac </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navegación" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="Documentación de Usuario." class="md-nav__button md-logo" href=".." title="Documentación de Usuario."> <img alt="logo" src="../images/logo.png"/> </a> Documentación de Usuario. </label> <div class="md-nav__source"> <a class="md-source" href="https://gestion.cenditel.gob.ve/trac/browser/kavac/" title="Ir al repositorio"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M100.59 334.24c48.57 3.31 58.95 2.11 58.95 11.94 0 20-65.55 20.06-65.55 1.52.01-5.09 3.29-9.4 6.6-13.46zm27.95-116.64c-32.29 0-33.75 44.47-.75 44.47 32.51 0 31.71-44.47.75-44.47zM448 80v352a48 48 0 01-48 48H48a48 48 0 01-48-48V80a48 48 0 0148-48h352a48 48 0 0148 48zm-227 69.31c0 14.49 8.38 22.88 22.86 22.88 14.74 0 23.13-8.39 23.13-22.88S258.62 127 243.88 127c-14.48 0-22.88 7.84-22.88 22.31zM199.18 195h-49.55c-25-6.55-81.56-4.85-81.56 46.75 0 18.8 9.4 32 21.85 38.11C74.23 294.23 66.8 301 66.8 310.6c0 6.87 2.79 13.22 11.18 16.76-8.9 8.4-14 14.48-14 25.92C64 373.35 81.53 385 127.52 385c44.22 0 69.87-16.51 69.87-45.73 0-36.67-28.23-35.32-94.77-39.38l8.38-13.43c17 4.74 74.19 6.23 74.19-42.43 0-11.69-4.83-19.82-9.4-25.67l23.38-1.78zm84.34 109.84l-13-1.78c-3.82-.51-4.07-1-4.07-5.09V192.52h-52.6l-2.79 20.57c15.75 5.55 17 4.86 17 10.17V298c0 5.62-.31 4.58-17 6.87v20.06h72.42zM384 315l-6.87-22.37c-40.93 15.37-37.85-12.41-37.85-16.73v-60.72h37.85v-25.41h-35.82c-2.87 0-2 2.52-2-38.63h-24.18c-2.79 27.7-11.68 38.88-34 41.42v22.62c20.47 0 19.82-.85 19.82 2.54v66.57c0 28.72 11.43 40.91 41.67 40.91 14.45 0 30.45-4.83 41.38-10.2z"></path></svg> </div> <div class="md-source__repository"> Repositorio-Kavac </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href=".." title="Inicio"> Inicio </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/> <label class="md-nav__link" for="nav-2"> Sistema KAVAC <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Sistema KAVAC" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-2"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Sistema KAVAC </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../about/" title="Acerca de"> Acerca de </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../development_methodology/" title="Gestión de Proyecto"> Gestión de Proyecto </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../information/" title="Información General"> Información General </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> Instalación <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg> </span> </label> <a class="md-nav__link md-nav__link--active" href="./" title="Instalación"> Instalación </a> <nav aria-label="Tabla de contenidos" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Tabla de contenidos </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-de-variables"> Configuración de variables </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#notificaciones-por-correo"> Notificaciones por correo </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#compilar-archivos-js-y-css-de-cada-modulo-de-la-aplicacion"> Compilar archivos js y css de cada modulo de la aplicación: </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#base-de-datos"> Base de datos </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#registros-iniciales"> Registros iniciales </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#probar-la-aplicacion"> Probar la aplicación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#procesamiento-de-colas"> Procesamiento de colas </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-extra-para-entornos-de-produccion"> Configuración extra para entornos de producción </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#glosario"> Glosario </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-del-servidor-de-aplicaciones"> Configuración del servidor de aplicaciones </a> <nav aria-label="Configuración del servidor de aplicaciones" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#instalar-nginx"> Instalar Nginx </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#instalar-php-fpm"> Instalar PHP-FPM </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configurar-el-servidor-virtual-de-nginx"> Configurar el servidor virtual de Nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#procesamiento-de-colas_1"> Procesamiento de colas </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#websockets"> Websockets </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#laravel-er-diagram-generator"> Laravel ER Diagram Generator </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#probar-la-aplicacion_1"> Probar la aplicación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#comandos-basicos-laravel-modules"> Comandos básicos laravel-modules </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#documentacion"> Documentación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#licencia"> Licencia </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/> <label class="md-nav__link" for="nav-3"> Primeros Pasos <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Primeros Pasos" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-3"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Primeros Pasos </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../getting_started/login/" title="Inicio de Sesión"> Inicio de Sesión </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/> <label class="md-nav__link" for="nav-4"> Configuración <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Configuración" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-4"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Configuración </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../setting/setting/" title="Configuración"> Configuración </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../setting/general_setting/" title="Configuración General"> Configuración General </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../setting/access_setting/" title="Configuración de Acceso"> Configuración de Acceso </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../setting/modules_setting/" title="Configuración de Módulos"> Configuración de Módulos </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../setting/user_account_setting/" title="Configuración de Cuenta de Usuario"> Configuración de Cuenta de Usuario </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/> <label class="md-nav__link" for="nav-5"> Panel de Control <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Panel de Control" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-5"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Panel de Control </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/control_panel/" title="Panel de Control"> Panel de Control </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/developers/" title="Herramientas para Desarrolladores"> Herramientas para Desarrolladores </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/access_control/" title="Control de Acceso"> Control de Acceso </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/accounting_module/" title="Módulo de Contabilidad"> Módulo de Contabilidad </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/asset_module/" title="Módulo de Bienes"> Módulo de Bienes </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../control_panel/warehouse_module/" title="Módulo de Almacén"> Módulo de Almacén </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../frequent_questions/" title="Preguntas Frecuentes"> Preguntas Frecuentes </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Tabla de contenidos" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Tabla de contenidos </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-de-variables"> Configuración de variables </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#notificaciones-por-correo"> Notificaciones por correo </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#compilar-archivos-js-y-css-de-cada-modulo-de-la-aplicacion"> Compilar archivos js y css de cada modulo de la aplicación: </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#base-de-datos"> Base de datos </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#registros-iniciales"> Registros iniciales </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#probar-la-aplicacion"> Probar la aplicación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#procesamiento-de-colas"> Procesamiento de colas </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-extra-para-entornos-de-produccion"> Configuración extra para entornos de producción </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#glosario"> Glosario </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuracion-del-servidor-de-aplicaciones"> Configuración del servidor de aplicaciones </a> <nav aria-label="Configuración del servidor de aplicaciones" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#instalar-nginx"> Instalar Nginx </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#instalar-php-fpm"> Instalar PHP-FPM </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configurar-el-servidor-virtual-de-nginx"> Configurar el servidor virtual de Nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#procesamiento-de-colas_1"> Procesamiento de colas </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#websockets"> Websockets </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#laravel-er-diagram-generator"> Laravel ER Diagram Generator </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#probar-la-aplicacion_1"> Probar la aplicación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#comandos-basicos-laravel-modules"> Comandos básicos laravel-modules </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#documentacion"> Documentación </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#licencia"> Licencia </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content"> <article class="md-content__inner md-typeset"> <h1 id="instalacion-del-sistema">Instalación del Sistema</h1> <hr/> <pre><code> _  __    ___     ___    ____ 
| |/ /   / \ \   / / \  / ___|
| ' /   / _ \ \ / / _ \| |    
| . \  / ___ \ V / ___ \ |___ 
|_|\_\/_/   \_\_/_/   \_\____|

Entorno: Desarrollo
Usaremos $ para describir los comandos que se ejecutaran con usuario regular.
Usaremos # para describir los comandos que se ejecutaran con superusuario.
</code></pre> <p>Se requiere de un Sistema Operativo de 64 bits y la instalación de algunos paquetes para el correcto funcionamiento de la aplicación:</p> <pre><code>php &gt;= 7.4.x
php-gd
php-mbstring
php-xml
php-tokenizer
php-zip
php-pgsql
php-cli
php-curl
composer
zip
unzip
nodejs
postgresql
</code></pre> <p>Para poder ejectutar la instalación es importante contar con el paquete <a href="https://getcomposer.org/">composer</a> el cual permite gestionar las distintas dependencias y/o paquetes requeridos por el sistema y una conexión externa a Internet. Cabe destacar que para mejores resultados, se debe tener instalado composer de manera global.</p> <p>Una vez instalado composer comprobamos la correcta instalación con el siguiente comando:</p> <pre><code>$ composer --version
</code></pre> <p>Por otro lado, se requiere contar con los paquetes NodeJS y NPM para gestionar los paquetes requeridos para la reactividad en la gestión de datos de algunos procesos.</p> <p>Se recomienda seguir la documentación disponible desde: https://linuxconfig.org/how-to-install-node-js-on-ubuntu-16-04-xenial-xerus-linux-server pero para este manual recomendamos los siguientes pasos:</p> <p>Procedimiento de instalación mediante el script nativo de node <strong>nvm</strong> el cual permite más control en cuanto a la versión de <strong>node</strong> y <strong>npm</strong> a ser instalada.</p> <p>Instalar los prerequisitos del S.O. mediante el siguiente comando:</p> <pre><code>$ sudo apt install build-essential libssl-dev
</code></pre> <p>Descargar el script de instalación más reciente mediante <strong>curl</strong>, para ello se requiere ejecutar el comando:</p> <pre><code>$ sudo curl -o- https://raw.githubusercontent.com/creationix/nvm/{version}/install.sh | bash
</code></pre> <p>Se debe sustituir la número de versión con la más reciente publicada la cual se puede encontrar <a href="https://github.com/nvm-sh/nvm/releases">aquí</a>, ejemplo:</p> <pre><code>$ sudo curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash
</code></pre> <p>Lo siguiente es configurar el acceso del nuevo script <strong>NVM</strong> con el siguiente comando:</p> <pre><code>$ . ~/.profile
</code></pre> <p>Esto permitira acceder al comando nvm desde cualquier ruta, una vez realizada la configuración, se procederá a verificar el listado de versiones de <strong>node</strong> disponibles en el repositorio para lo cual se require ejecutar el comando:</p> <pre><code>$ nvm ls-remote | grep -i lts
</code></pre> <p>Esto debe mostrar un listado de versiones de node que correspondan a las versiones <strong>LTS</strong>, ejemplo:</p> <p>v10.15.3 (LTS: Dubnium) v10.16.0 (LTS: Dubnium) v10.16.1 (LTS: Dubnium) v10.16.2 (LTS: Dubnium) v10.16.3 (Latest LTS: Dubnium)</p> <p>Ahora procedemos a la instalación de la versión de node más actualizada que presente la lista, para lo cual se ejecutará el comando:</p> <pre><code>$ nvm install 10.16.3
</code></pre> <p>Una vez instalado NodeJS comprobamos la correcta instalación con el siguiente comando:</p> <pre><code>$ node -v
</code></pre> <p>Los comandos anteriores nos instalaran NodeJS y también npm, por lo cual comprobamos su correcta instalación con el siguiente comando:</p> <pre><code>$ npm -v
</code></pre> <p>Ahora se deben instalar las dependencias de php de la aplicación, por lo cual los siguientes comando se deben ejecutar dentro del directorio base de la aplicación:</p> <pre><code>$ composer install
</code></pre> <p>Una vez instaladas las dependencias, ejecuta el comando:</p> <pre><code>$ php artisan key:generate
</code></pre> <p>Esto generará un identificador único para la aplicación y creará (si no existe), el archivo de configuración .env, en caso de que no se genere dicho archivo se debe ejecutar el comando:</p> <pre><code>$ cp .env.example .env
</code></pre> <p>Luego se debe repetir el paso anterior.</p> <p>Luego, en el archivo .env, localizado en la raíz del sistema, se deben establecer los parámetros de configuración necesarios bajo los cuales se ejecutará la aplicación.</p> <pre><code>APP_NAME
APP_ENV
APP_KEY
APP_DEBUG
APP_LOG_LEVEL
APP_URL
APP_DEMO
APP_TESTING
APP_TESTING_URL

AUDIT_LIMIT

LOG_CHANNEL
LOG_SLACK_WEBHOOK_URL

DB_CONNECTION
DB_HOST
DB_PORT
DB_DATABASE
DB_USERNAME
DB_PASSWORD

BROADCAST_DRIVER
CACHE_DRIVER
SESSION_DRIVER
SESSION_LIFETIME
QUEUE_CONNECTION

REDIS_HOST
REDIS_PASSWORD
REDIS_PORT
REDIS_CLIENT
REDIS_DB

MAIL_DRIVER
MAIL_HOST
MAIL_PORT
MAIL_USERNAME
MAIL_PASSWORD
MAIL_ENCRYPTION

AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
AWS_DEFAULT_REGION
AWS_BUCKET

PUSHER_APP_ID
PUSHER_APP_KEY
PUSHER_APP_SECRET
PUSHER_APP_CLUSTER
PUSHER_APP_TLS

WEBSOCKETS_HOST
WEBSOCKETS_PORT
WEBSOCKETS_SSL_LOCAL_CERT
WEBSOCKETS_SSL_LOCAL_PK
WEBSOCKETS_SSL_PASSPHRASE

MIX_APP_URL
MIX_APP_ROOT
MIX_PUSHER_APP_KEY
MIX_PUSHER_APP_CLUSTER
MIX_WEBSOCKETS_HOST
MIX_WEBSOCKETS_PORT
MIX_PUSHER_APP_TLS
</code></pre> <p>De igual manera se debe instalar los paquetes necesarios para la gestión reactiva de datos, para lo cual se debe ejecutar el siguiente comando (teniendo en cuenta que se debe contar con nodejs y npm previamente instalados):</p> <pre><code>$ npm install
</code></pre> <p>El comando anterior instala todas las dependencias de node requeridas por el sistema.</p> <h2 id="configuracion-de-variables">Configuración de variables</h2> <p>Dentro del archivo <strong>.env</strong> se encuentran algunas variables que deben ser configuradas previamente para el correcto funcionamiento de la aplicación las cuales se describen a continuación:</p> <p>APP_NAME | Esta variable almacena el nombre de la aplicación cuyo valor por defecto es KAVAC.</p> <p>APP_ENV | Establece el entorno bajo el cual se ejecuta la aplicación. Para un entorno en producción se debe establecer el valor a <strong>production</strong>.</p> <p>APP_KEY | El valor de esta variable se establece al ejecutar el comando php artisan key:generate.</p> <p>APP_DEBUG | Establece si la aplicación se ejecuta en modo de desarrollo si el valor es establecido en <strong>true</strong>, mostrando detalles de los eventos que se generan en la aplicación así como la barra de de desarrollo <strong>debugbar</strong>. Para entornos en producción esta variable debe establecerse en <strong>false</strong>.</p> <p>APP_LOG_LEVEL | Indica el nivel de detalle para el cual se genera la bitácora de eventos y su valor por defecto es <strong>debug</strong> el cual establece el nivel de detalle mas amplio.</p> <p>APP_URL | El valor establecido en esta variable es de importancia en otros procesos del sistema y en ella se indica el <strong>dominio</strong> o <strong>IP</strong> de la aplicación incluyendo el protocolo <strong>http</strong> o <strong>https</strong>.</p> <p>APP_DEMO | El valor de esta variable determina si la aplicación se esta ejecutando en modo de demostración cuando es establecida como <strong>true</strong>, su valor por defecto es <strong>false</strong>.</p> <p>APP_TESTING | Indica si la aplicación se encuentra en mnodo de prueba para lo cual se debe establecer el valor en <strong>true</strong>. Su valor por defecto es <strong>false</strong>.</p> <p>APP_TESTING_URL | Establece el <strong>dominio</strong> o <strong>IP</strong> de la aplicación para pruebas incluyendo el protocolo <strong>http</strong> o <strong>https</strong>, esta variable es opcional.</p> <p>AUDIT_LIMIT | Indica el límite de registros a almacenar por cada modelo de la aplicación para la auditoria.</p> <h2 id="notificaciones-por-correo">Notificaciones por correo</h2> <p>Para el correcto funcionamiento de las notificaciones del sistema mediante la gestión de correo electrónico, se deben establecer los valores necesarios del servidor de correo a utilizar por la aplicación. Estas variables son:</p> <pre><code>MAIL_DRIVER
MAIL_HOST
MAIL_PORT
MAIL_USERNAME
MAIL_PASSWORD
MAIL_ENCRYPTION
</code></pre> <p>Donde,</p> <p>MAIL_DRIVER | Es el driver de conexión al servidor de correo saliente que gestionará las notificaciones.</p> <p>MAIL_HOST | Es el dominio del host de correo saliente.</p> <p>MAIL_PORT | Es el puerto del servidor de correo saliente.</p> <p>MAIL_USERNAME | Es el nombre del usuario con atributos para enviar correo electrónico.</p> <p>MAIL_PASSWORD | Es la contraseña del usuario que gestiona el correo saliente.</p> <p>MAIL_ENCRYPTION | Define el protocolo de cifrado usado por el gestor de correo electrónico. Los valores a establecer pueden ser: <strong>ssl</strong>, <strong>tls</strong> o <strong>null</strong>.</p> <h2 id="compilar-archivos-js-y-css-de-cada-modulo-de-la-aplicacion">Compilar archivos js y css de cada modulo de la aplicación:</h2> <pre><code>$ php artisan module:compile -s -i -p
</code></pre> <h2 id="base-de-datos">Base de datos</h2> <p>KAVAC puede ser ejecutado con diferentes gestores de Base de datos tales como PostgreSQL, MySQL, SQLite, entre otros, sin embargo se recomienda el uso del gestor de Base de datos PostgreSQL por su capacidad en la gestión de información.</p> <p>Debe crear una base de datos en el gestor de su preferencia y configurarlo en el archivo .env con los datos de acceso.</p> <p>Ejemplo de configuración de una base de datos de PostgreSQL:</p> <pre><code>DB_CONNECTION=pgsql
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=kavac
DB_USERNAME=kavac
DB_PASSWORD=kavac
</code></pre> <p>Una vez configurado el gestor de base de datos, se deben ejecutar los siguientes comandos:</p> <pre><code>$ php artisan migrate
</code></pre> <p>Lo anterior creará la estructura de tablas de la base de datos necesaria para comenzar a gestionar la información.</p> <h2 id="registros-iniciales">Registros iniciales</h2> <p>KAVAC, cuenta con información inicial requerida para la gestión de la aplicación, para lo cual se debe ejecutar el comando:</p> <pre><code>$ php artisan db:seed
</code></pre> <p>El anterior comando ejecutara las acciones necesarias para ingresar al sistema los datos inicialmente requeridos por la aplicación base como son: usuario, roles, permisos, localidades, estados civiles, profesiones, sectores de organizaciones y tipos de organizaciones.</p> <p>La aplicación cuenta con una cantidad de módulos independientes que permiten expandir sus funcionalidades, cada uno de estos módulos cuentan con sus registros iniciales por lo que es necesario ejecutar un comando adicional que permita registrar información de cada módulo instalado y habilitado en el sistema, para ello se ejecuta el siguiente comando:</p> <pre><code>$ php artisan module:seed
</code></pre> <p>Esto revisará que módulos del sistema estan habilitados y procederá a registrar la información requerida, inicialmente, por cada uno de ellos.</p> <p>Una vez que hayan sido registrado los datos iniciales del sistema, se puede autenticar en el mismo con los siguientes datos de acceso como administrador (es recomendable modificar la contraseña en el primer acceso al sistema):</p> <pre><code>usuario: admin
clave: 123456
</code></pre> <p>El primer paso, para el correcto funcionamiento del sistema, es registrar información básica de la organización que llevará a cabo la gestión de información dentro de la aplicación, para ello se debe ingresar al menú</p> <pre><code>Configuración &gt; General
</code></pre> <p>Y allí, en el panel <strong>"CONFIGURAR ORGANIZACIÓN"</strong> se deben indicar los datos de la organización. Una vez configurada, se mostrarán todas las opciones de los módulos disponibles en el sistema.</p> <h2 id="probar-la-aplicacion">Probar la aplicación</h2> <p>Para identificar si la aplicación se encuentra correctamente instalada, puedes ejecutar el comando de artisan que te permite levantar un servidor en entornos de desarrollo de la siguiente forma:</p> <pre><code>$ php artisan serve
</code></pre> <p>Este comando levanta un servidor en la dirección ip 127.0.0.1 o localhost y en el puerto 8000, para verificarlo puedes acceder a el enlace <a href="127.0.0.1:8000">127.0.0.1:8000</a></p> <p>Puedes, de igual forma asignarle una dirección IP o dominio a este comando y un puerto en donde atenderá las peticiones para lo cual se puede agregar las opciones --host y/o --port, un ejemplo de su uso sería:</p> <pre><code>$ php artisan serve --host=192.168.1.1 --port 9000
</code></pre> <h2 id="procesamiento-de-colas">Procesamiento de colas</h2> <p>Ciertos procedimientos del sistema permiten y requieren establecer colas de trabajo para peticiones y registros con grandes cantidades de información. Para entornos de producción se recomienda realizar una configuración previa antes de iniciar la aplicación, la descripción de esta configuración se encuentra en la sección 'Configuración extra para entornos de producción &gt; Procesamiento de colas' de este archivo. Para activar los workers en un entorno de desarrollo, se debe ejecutar el siguiente comando, el cual debe quedar iniciado y mantenerse en una consola de comandos:</p> <pre><code>$ php artisan queue:work
</code></pre> <p>Llegado a este punto ya se debe contar con la aplicación funcional en un entorno local de desarrollo, a continuación se describen configuraciones para entornos de producción.</p> <h2 id="configuracion-extra-para-entornos-de-produccion">Configuración extra para entornos de producción</h2> <pre><code>Entorno: Producción
Usaremos $ para describir los comandos que se ejecutaran con usuario regular.
Usaremos # para describir los comandos que se ejecutaran con superusuario.
</code></pre> <p>Se requiere la instalación de algunos paquetes para el correcto funcionamiento de la aplicación:</p> <pre><code>servidor de aplicaciones nginx, apache, etc
supervisor
</code></pre> <h2 id="glosario">Glosario</h2> <p><strong>(ruta-absoluta-de-instalacion)</strong>: Es la ruta en donde se va a instalar la aplicación, colocando la misma sin los (), por ejemplo:</p> <pre><code>/srv/kavac/
</code></pre> <p><strong>(version-php-instalada)</strong>: Es la versión del o los paquetes de PHP instalados, colocando la misma sin los (), por ejemplo: 7.4</p> <h2 id="configuracion-del-servidor-de-aplicaciones">Configuración del servidor de aplicaciones</h2> <p>En esta documentación se explica como configurar un servidor de aplicaciones Nginx (para otro tipo de servidor se debe consultar la documentación pertinente para una configuración óptima en aplicaciones basadas en PHP).</p> <h3 id="instalar-nginx">Instalar Nginx</h3> <p>Lo primero que se debe realizar es la instalación del servidor de aplicaciones con el comando</p> <pre><code># apt install nginx
</code></pre> <p>Una vez completada la instalación, inicie el servicio nginx y agréguelo para que se inicie automáticamente con sistema operativo mediante el comando systemctl.</p> <pre><code># systemctl start nginx
# systemctl enable nginx
</code></pre> <p>El servidor Nginx se ejecutará en el puerto 80, para verificar si se ejecutó correctamente debe ejecutar el comando</p> <pre><code># sudo systemctl status nginx
</code></pre> <p>o</p> <pre><code># netstat -plntu
</code></pre> <p>Si todo lo muestra correctamente, nginx estará instalado y en ejecución.</p> <h3 id="instalar-php-fpm">Instalar PHP-FPM</h3> <p>Para instalar la extensión FPM (FastCGI Process Manager) de la versión de PHP instalada en el sistema operativo se debe ejecutar el comando</p> <pre><code># apt install php-fpm
</code></pre> <p>El próximo paso es configurar el archivo php.ini de FPM, para lo cual se deve acceder a la ruta en donde fue instalado, por lo general esta ruta se encuentra en /etc/php/(version-php-instalada)/fpm/, para esto se debe editar ejecutando</p> <pre><code># nano /etc/php/(version-php-instalada)/fpm/php.ini
</code></pre> <p>donde (version-php-instalada) es la versión de php instalada en el servidor, Ej. 7.3</p> <p>la subcarpeta <strong>/fpm/</strong> puede variar de acuerdo a la distribución linux utilizada por lo que puede estar presente o no.</p> <p>En el contenido del archivo se debe buscar y descomentar la variable cgi.fix_pathinfo=1 y cambiar el valor a 0</p> <pre><code>cgi.fix_pathinfo=0
</code></pre> <p>A su vez, se deben realizar algunos ajustes adicionales para optimizar las peticiones para la carga d archivos por lo que es necesario establecer los siguientes valores a las variables descritas:</p> <pre><code>upload_max_filesize = 10M

max_file_uploads = 50

post_max_size = 40M
</code></pre> <p>Guarda las modificaciones realizadas e inicializa el servicio FPM con los comandos</p> <pre><code># systemctl start php(version-php-instalada)-fpm

# systemctl enable php(version-php-instalada)-fpm
</code></pre> <p>El primer comando inicializa el servicio y el segundo lo habilita para que se ejecute automáticamente al arrancar el servidor.</p> <p>Por defecto en sistemas operativos como Ubuntu el servicio PHP-FPM se ejecuta bajo un archivo socket, para verificar que el servicio PHP-FPM se haya inicializado correctamente deberá escribir el comando netstat de la siguiente forma</p> <pre><code>$ netstat -pl | grep php(version-php-instalada)-fpm
</code></pre> <p>Con lo anterior, el servidor virtual para la aplicación fue creado, solo queda reiniciar el servidor nginx para que las modificaciones tengan efecto</p> <pre><code># systemctl restart nginx
</code></pre> <h3 id="configurar-el-servidor-virtual-de-nginx">Configurar el servidor virtual de Nginx</h3> <p>Para que la aplicación se ejecute en el servidor de aplicaciones Nginx, se debe realizar una configuración adicional creando para ello un archivo que contendrá dicha configuración, para esto se ejecutara el siguiente comando</p> <pre><code># nano /etc/nginx/sites-available/kavac
</code></pre> <p>y se agregara el siguiente contenido:</p> <pre><code>server {
    proxy_busy_buffers_size   256k;
    proxy_buffers   4 256k;
    proxy_buffer_size   128k;
    fastcgi_buffers 16 16k;
    fastcgi_buffer_size 32k;
    fastcgi_busy_buffers_size 32k;

    listen 80;
    # Descomentar si las peticiones solo aceptan el protocolo ipv6
    # listen [::]:80 ipv6only=on;

    # Log files for Debugging
    access_log /var/log/nginx/kavac-access.log;
    error_log /var/log/nginx/kavac-error.log;

    # Webroot Directory for kavac project
    root (ruta-absoluta-de-instalacion)/public;
    index index.php index.html index.htm;

    # Your Domain Name
    server_name (nombre-de-dominio-que-atiende-las-peticiones);

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # PHP-FPM Configuration Nginx
    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/run/php/php(version-php-instalada)-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}
</code></pre> <p>guarda las modificaciones y cierra el archivo</p> <p>Ahora para activar el servidor virtual se debe crear un enlace símbolico al archivo de configuración de la siguiente forma</p> <pre><code># ln -s /etc/nginx/sites-available/kavac /etc/nginx/sites-enabled/
</code></pre> <p>Para que estos cambios tengan efecto se debe reiniciar el servidor de aplicaciones</p> <pre><code># systemctl restart nginx
</code></pre> <h2 id="procesamiento-de-colas_1">Procesamiento de colas</h2> <p>El sistema cuenta con procedimientos que permiten establecer colas de trabajo para peticiones y registros con grandes cantidades de información, por tal motivo es necesario realizar una configuración previa antes de iniciar la aplicación.</p> <p>Dentro del archivo config/queue.php se encuentra las distintas variables a configurar para el uso de colas, por lo que se deben configurar el driver a usar para la gestión de las colas y posteriormente configurar los datos necesarios del servidor seleccionado.</p> <p>Lo primero es configuar dentro del archivo de entorno (.env) la variable <strong>QUEUE_CONNECTION</strong> para el uso del driver a implementar en la gestión de colas, por defecto esta configurado para hacer uso del driver mediante base de datos de la siguiente manera:</p> <pre><code>QUEUE_CONNECTION=database
</code></pre> <p>Si se desea configurar otro driver para la gestión de colas se puede obtener información en la documentación oficial del framework <a href="https://docs.laravel.com">Laravel</a>.</p> <p>Una vez configurado el servidor de colas es necesario realizar los procedimientos necesarios para que los <strong>workers</strong> que procesan las colas de trabajo esten activo en todo momento, para esto es recomendable configurar a supervisorctl de la siguiente forma:</p> <p>Crear un archivo llamado <strong>kavac-worker.conf</strong> en la ruta <strong>/etc/supervisor/conf.d/</strong> con el siguiente contenido:</p> <pre><code>[program:laravel-worker]
process_name=%(program_name)s_%(process_num)02d
command=/usr/bin/php &lt;ruta-de-la-aplicacion-kavac&gt;/artisan queue:work sqs --sleep=3 --tries=3
autostart=true
autorestart=true
user=&lt;usuario-del-sistema&gt;
numprocs=1
redirect_stderr=true
stdout_logfile=&lt;ruta-de-la-aplicacion-kavac&gt;/storage/logs/worker.log
stopwaitsecs=3600
</code></pre> <p>Donde:</p> <pre><code>/user/bin/php es la ruta en donde se encuentra el comando php.

&lt;ruta-de-la-aplicacion-kavac&gt; es la ruta en donde se encuentra instalada la aplicación.

&lt;usuario-del-sistema&gt; es el usuario del sistema operativo en donde se encuentra la aplicación, el cual tendrá los permisos necesarios para ejecutar los distintos procesos.
</code></pre> <p>Actualizar y ejecutar supervisorctl de la siguiente forma:</p> <pre><code>$ sudo supervisorctl reread

$ sudo supervisorctl update

$ sudo supervisorctl start kavac-worker:*
</code></pre> <h2 id="websockets">Websockets</h2> <p>La aplicación viene con un sistema de notificaciones en tiempo real con websockets por lo que es necesario iniciar y mantener el servidor que atiende y despacha estas peticiones, además de establecer algunos valores en el archivo <strong>.env</strong> de la siguiente forma:</p> <pre><code>PUSHER_APP_ID=&lt;API_ID&gt;
PUSHER_APP_KEY=&lt;API_KEY&gt;
PUSHER_APP_SECRET=&lt;API_SECRET&gt;
PUSHER_APP_CLUSTER=mt1
PUSHER_APP_TLS=false

WEBSOCKETS_HOST=&lt;WEBSOCKET_IP&gt;
WEBSOCKETS_PORT=&lt;WEBSOCKET_PORT&gt;
WEBSOCKETS_SSL_LOCAL_CERT=null
WEBSOCKETS_SSL_LOCAL_PK=null
WEBSOCKETS_SSL_PASSPHRASE=null

MIX_APP_URL="${APP_URL}"
MIX_APP_ROOT="${APP_ROOT}"
MIX_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
MIX_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"
MIX_WEBSOCKETS_HOST="${WEBSOCKETS_HOST}"
MIX_WEBSOCKETS_PORT="${WEBSOCKETS_PORT}"
MIX_PUSHER_APP_TLS="${PUSHER_APP_TLS}"
</code></pre> <p>Luego de realizada la configuración en el archivo de entorno <strong>.env</strong> se requiere tener instalado en el servidor de aplicaciones una aplicación que monitoree y ejecute este servicio para lo cual se utiliza la aplicación <strong><em>supervisor</em></strong>.</p> <p>Una vez instalado <strong><em>supervisor</em></strong>, se requiere agregar y configurar un nuevo proceso que permita mantener la ejecución de los websockets de la aplicación, para lo cual se debe crear un nuevo archivo con el nombre <strong>websockets.conf</strong> dentro del directorio /etc/supervisor/conf.d (en Debian/Ubuntu) ó /etc/supervisord.d (en RedHat/CentOS).</p> <p>El archivo creado deberá contener la siguiente información:</p> <pre><code>[program:websockets]
command=/usr/bin/php &lt;ruta-de-la-aplicacion-kavac&gt;/artisan websockets:serve
numprocs=1
autostart=true
autorestart=true
user=&lt;usuario-del-sistema&gt;
</code></pre> <p>Donde:</p> <pre><code>/user/bin/php es la ruta en donde se encuentra el comando php

&lt;ruta-de-la-aplicacion-kavac&gt; es la ruta en donde se encuentra instalada la aplicación

&lt;usuario-del-sistema&gt; es el usuario del sistema operativo en donde se encuentra la aplicación, el cual tendrá los permisos necesarios para ejecutar los distintos procesos
</code></pre> <p>Con la configuración anteriormente descrita, se debe reiniciar el <strong>supervisor</strong> para que tome en cuenta la nueva configuración, para lo cual se ejecutan los siguientes comandos:</p> <pre><code>$ supervisorctl update

$ supervisorctl start websockets
</code></pre> <p>Para verificar que la configuración es correcta y el servicio se este ejecutando, se puede indicar el siguiente comando:</p> <pre><code>$ supervisorctl status
</code></pre> <p>El último paso en el proceso de instalación es modificar los usuarios y permisos para el acceso del servidor a la aplicación KAVAC, para lo cual le indicamos la permisología y usuario correspondiente</p> <pre><code># chown -R www-data:root (ruta-absoluta-de-instalacion)

# chmod 755 (ruta-absoluta-de-instalacion)/storage
</code></pre> <h2 id="laravel-er-diagram-generator">Laravel ER Diagram Generator</h2> <p>Este paquete permite generar diagramas de entidad relación inspeccionando las relaciones definidas en sus archivos de modelo. Por defecto busca los modelos en la carpeta app. Para agregar los modelos que se encuentran en cada módulo hay que hacer lo siguiente:</p> <pre><code>// Editar en el archivo
vendor/beyondcode/laravel-er-diagram-generator/config/config.php

// Esta sección en la linea 9
'directories' =[
    base_path('app'),
    // Carpeta agregada para el módulo Payroll
    base_path('modules/Payroll/Models'),
],
</code></pre> <p>En ese ejemplo genera el diagrama del sistema base y del módulo Talento Humano.</p> <p>Comando para generar el diagrama:</p> <pre><code>$ php artisan generate:erd kavac.svg --format=svg
</code></pre> <p>Para un mejor rendimiento de la aplicación en entornos de producción se recomienda utilizar el comando:</p> <pre><code>$ composer install --optimize-autoloader --no-dev
</code></pre> <p>Esto permitirá una carga más optimizada de los componentes del sistema.</p> <h2 id="probar-la-aplicacion_1">Probar la aplicación</h2> <p>Para identificar si la aplicación se encuentra correctamente instalada, puedes ejecutar el comando de artisan que te permite levantar un servidor en entornos de desarrollo de la siguiente forma:</p> <pre><code>$ php artisan serve
</code></pre> <p>Este comando levanta un servidor en la dirección ip 127.0.0.1 o localhost y en el puerto 8000, para verificarlo puedes acceder a el enlace <a href="127.0.0.1:8000">127.0.0.1:8000</a></p> <p>Puedes, de igual forma asignarle una dirección IP o dominio a este comando y un puerto en donde atenderá las peticiones para lo cual se puede agregar las opciones --host y/o --port, un ejemplo de su uso sería:</p> <pre><code>$ php artisan serve --port 192.168.1.1 --port 9000
</code></pre> <h2 id="comandos-basicos-laravel-modules">Comandos básicos laravel-modules</h2> <p>Ejecutar las migraciones laravel-modules</p> <pre><code>$ php artisan module:migrate
</code></pre> <p>Crea un nuevo modelo para el módulo especificado junto con su migración</p> <pre><code>$ php artisan module:make-model -m ModuleNameModelName ModuleName
</code></pre> <p>Genera nuevo controlador restful para el módulo especificado</p> <pre><code>$ php artisan module:make-controller ModuleNameModelName ModuleName
</code></pre> <p>Genera nuevo seeder para el módulo especificado (nombre del modelo en plural)</p> <pre><code>$ php artisan module:make-seed ModuleNameModelName ModuleName
</code></pre> <h2 id="documentacion">Documentación</h2> <p>La aplicación cuenta con una amplia documentación técnica y para usuarios del sistema, las cuales se encuentran bajo las siguientes rutas:</p> <ul> <li><a href="">Técnica</a></li> <li><a href="">Usuario</a></li> </ul> <h2 id="licencia">Licencia</h2> <p>Kavac es una aplicación de código abierto y se distribuye estrictamente bajo la licencia <a href="http://conocimientolibre.cenditel.gob.ve/licencia-de-software-v-1-3/">LICENCIA DE SOFTWARE CENDITEL</a>.</p> </article> </div> </div> </main> <footer class="md-footer"> <div class="md-footer-nav"> <nav aria-label="Pie" class="md-footer-nav__inner md-grid"> <a class="md-footer-nav__link md-footer-nav__link--prev" href="../information/" rel="prev" title="Información General"> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </div> <div class="md-footer-nav__title"> <div class="md-ellipsis"> <span class="md-footer-nav__direction"> Anterior </span> Información General </div> </div> </a> <a class="md-footer-nav__link md-footer-nav__link--next" href="../getting_started/login/" rel="next" title="Inicio de Sesión"> <div class="md-footer-nav__title"> <div class="md-ellipsis"> <span class="md-footer-nav__direction"> Siguiente </span> Inicio de Sesión </div> </div> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-footer-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a>  ... <a class="link--pdf-download" download href="../pdf/document.pdf" title="PDF">download PDF</a></div> </div> </div> </footer> </div> <script src="../assets/javascripts/vendor.d710d30a.min.js"></script> <script src="../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados"}</script> <script>
        app = initialize({
          base: "..",
          features: ["navigation.tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>